\<!DOCTYPE html>
<html>

<head>

<title>Todo App</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

</head>

<body class="container mt-5">

<h2>Todo List</h2>

<form action="/add-task" method="POST">

<input
name="title"
class="form-control"
placeholder="Nhập công việc"
required
>

<button class="btn btn-primary mt-2">
Thêm công việc
</button>

</form>

<hr>

<%
let total = tasks.length;
let done = tasks.filter(t => t.isDone).length;
let percent = total === 0 ? 0 : Math.round((done/total)*100);
%>

<h5>Progress</h5>

<div class="progress mb-3">

<div
class="progress-bar"
style="width: <%= percent %>%"
>

<%= percent %>%

</div>

</div>

<ul class="list-group">

<% tasks.forEach(task => { %>

<li class="list-group-item d-flex justify-content-between">

<div>

<%= task.title %>

<% if(task.isDone){ %>
<span class="badge bg-success">Done</span>
<% } %>

</div>

<div>

<form action="/done-task/<%= task._id %>" method="POST" style="display:inline;">

<button class="btn btn-success btn-sm">
Done
</button>

</form>

<form action="/delete-task/<%= task._id %>" method="POST" style="display:inline;">

<button class="btn btn-danger btn-sm">
Xóa
</button>

</form>

</div>

</li>

<% }) %>

</ul>
<h2>Welcome <%= username %></h2>

<a href="/logout">Logout</a>

</body>

</html>